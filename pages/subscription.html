<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PixelPerfect Graphix - Subscription Plans</title>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .pricing-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
        }

        .pricing-card {
            background: white;
            border-radius: 20px;
            padding: 40px 30px;
            text-align: center;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .pricing-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #667eea, #764ba2);
        }

        .pricing-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 25px 50px rgba(0,0,0,0.2);
        }

        .popular {
            transform: scale(1.05);
            border: 3px solid #667eea;
        }

        .popular::after {
            content: '‡§∏‡§¨‡§∏‡•á ‡§≤‡•ã‡§ï‡§™‡•ç‡§∞‡§ø‡§Ø';
            position: absolute;
            top: 20px;
            right: -35px;
            background: #667eea;
            color: white;
            padding: 8px 40px;
            font-size: 12px;
            font-weight: bold;
            transform: rotate(45deg);
        }

        .plan-name {
            font-size: 1.8rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .plan-price {
            font-size: 3rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }

        .plan-duration {
            color: #666;
            margin-bottom: 20px;
            font-size: 1.1rem;
        }

        .plan-savings {
            background: #e8f5e8;
            color: #2d7d2d;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
            margin-bottom: 20px;
            display: inline-block;
        }

        .plan-features {
            list-style: none;
            margin-bottom: 30px;
        }

        .plan-features li {
            padding: 10px 0;
            border-bottom: 1px solid #f0f0f0;
            color: #555;
        }

        .plan-features li:before {
            content: '‚úì';
            color: #667eea;
            font-weight: bold;
            margin-right: 10px;
        }

        .subscribe-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.1rem;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-bottom: 15px;
        }

        .subscribe-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        .subscribe-btn:active {
            transform: translateY(0);
        }

        .upi-info {
            background: #f8f9ff;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            font-size: 0.9rem;
            color: #555;
        }

        .upi-apps {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }

        .upi-app {
            background: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            color: #667eea;
            font-weight: bold;
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
            display: none;
        }

        .error-message {
            background: #f8d7da;
            color: #721c24;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
            display: none;
        }

        .loading {
            opacity: 0.7;
            pointer-events: none;
        }

        .loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 20px;
            height: 20px;
            border: 2px solid #fff;
            border-top: 2px solid transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            transform: translate(-50%, -50%);
        }

        @keyframes spin {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }

        .footer {
            text-align: center;
            color: white;
            opacity: 0.8;
            margin-top: 50px;
        }

        .security-badges {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .security-badge {
            background: rgba(255,255,255,0.1);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 0.9rem;
            border: 1px solid rgba(255,255,255,0.2);
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .pricing-container {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .popular {
                transform: none;
            }
            
            .security-badges {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>PixelPerfect Graphix</h1>
            <p>Professional Graphics Design Subscription Plans</p>
        </div>

        <!-- Success/Error Messages -->
        <div id="successMessage" class="success-message">
            <h3>üéâ Payment Successful!</h3>
            <p>‡§Ü‡§™‡§ï‡§æ subscription activate ‡§π‡•ã ‡§ó‡§Ø‡§æ ‡§π‡•à‡•§ Welcome to PixelPerfect Graphix!</p>
        </div>

        <div id="errorMessage" class="error-message">
            <h3>‚ùå Payment Failed</h3>
            <p id="errorText">‡§ï‡•Å‡§õ ‡§ó‡§≤‡§§ ‡§π‡•Å‡§Ü ‡§π‡•à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§¶‡•ã‡§¨‡§æ‡§∞‡§æ ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞‡•á‡§Ç‡•§</p>
        </div>

        <!-- Pricing Cards -->
        <div class="pricing-container">
            <!-- Monthly Plan -->
            <div class="pricing-card">
                <div class="plan-name">Monthly Plan</div>
                <div class="plan-price">‚Çπ49</div>
                <div class="plan-duration">‡§™‡•ç‡§∞‡§§‡§ø ‡§Æ‡§π‡•Ä‡§®‡§æ</div>
                
                <ul class="plan-features">
                    <li>1000+ Premium Templates</li>
                    <li>Commercial License</li>
                    <li>Instant Download</li>
                    <li>Canva Compatible</li>
                    <li>Email Support</li>
                </ul>
                
                <button class="subscribe-btn" onclick="handleSubscription('monthly', 49, 'plan_monthly_id')">
                    Subscribe Now - ‚Çπ49
                </button>
                
                <div class="upi-info">
                    <strong>üîí UPI AutoPay Enabled</strong><br>
                    Automatic monthly payments
                    <div class="upi-apps">
                        <span class="upi-app">GPay</span>
                        <span class="upi-app">PhonePe</span>
                        <span class="upi-app">PayTM</span>
                        <span class="upi-app">BHIM</span>
                    </div>
                </div>
            </div>

            <!-- Quarterly Plan -->
            <div class="pricing-card popular">
                <div class="plan-name">Quarterly Plan</div>
                <div class="plan-price">‚Çπ99</div>
                <div class="plan-duration">‡§™‡•ç‡§∞‡§§‡§ø ‡§§‡§ø‡§Æ‡§æ‡§π‡•Ä (‚Çπ33/month)</div>
                <div class="plan-savings">Save ‚Çπ48/year</div>
                
                <ul class="plan-features">
                    <li>3000+ Premium Templates</li>
                    <li>Commercial License</li>
                    <li>Priority Download</li>
                    <li>Canva Compatible</li>
                    <li>Priority Support</li>
                    <li>Brand Guidelines</li>
                </ul>
                
                <button class="subscribe-btn" onclick="handleSubscription('quarterly', 99, 'plan_quarterly_id')">
                    Subscribe Now - ‚Çπ99
                </button>
                
                <div class="upi-info">
                    <strong>üîí UPI AutoPay Enabled</strong><br>
                    Automatic quarterly payments
                    <div class="upi-apps">
                        <span class="upi-app">GPay</span>
                        <span class="upi-app">PhonePe</span>
                        <span class="upi-app">PayTM</span>
                        <span class="upi-app">BHIM</span>
                    </div>
                </div>
            </div>

            <!-- Annual Plan -->
            <div class="pricing-card">
                <div class="plan-name">Annual Plan</div>
                <div class="plan-price">‚Çπ299</div>
                <div class="plan-duration">‡§™‡•ç‡§∞‡§§‡§ø ‡§µ‡§∞‡•ç‡§∑ (‚Çπ25/month)</div>
                <div class="plan-savings">Save ‚Çπ289/year</div>
                
                <ul class="plan-features">
                    <li>5000+ Premium Templates</li>
                    <li>Commercial License</li>
                    <li>Instant Download</li>
                    <li>Canva Compatible</li>
                    <li>24/7 Priority Support</li>
                    <li>Brand Guidelines</li>
                    <li>Custom Templates</li>
                    <li>Dedicated Account Manager</li>
                </ul>
                
                <button class="subscribe-btn" onclick="handleSubscription('annual', 299, 'plan_annual_id')">
                    Subscribe Now - ‚Çπ299
                </button>
                
                <div class="upi-info">
                    <strong>üîí UPI AutoPay Enabled</strong><br>
                    Automatic annual payments
                    <div class="upi-apps">
                        <span class="upi-app">GPay</span>
                        <span class="upi-app">PhonePe</span>
                        <span class="upi-app">PayTM</span>
                        <span class="upi-app">BHIM</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Security Badges -->
        <div class="security-badges">
            <div class="security-badge">üîí 256-bit SSL Encrypted</div>
            <div class="security-badge">üè¶ RBI Approved</div>
            <div class="security-badge">‚úÖ PCI DSS Compliant</div>
            <div class="security-badge">üõ°Ô∏è Secure Payments</div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p>&copy; 2025 PixelPerfect Graphix. All rights reserved.</p>
            <p>Secure payments powered by Razorpay</p>
        </div>
    </div>

    <script>
        // Configuration
        const RAZORPAY_KEY_ID = 'rzp_live_R6zs7J50awSUhd'; // ‡§Ü‡§™‡§ï‡•Ä live key
        const COMPANY_NAME = 'PixelPerfect Graphix';
        const COMPANY_LOGO = 'https://pixelperfectgraphix.vercel.app/logo.png'; // ‡§Ü‡§™‡§ï‡§æ logo URL
        
        // Plan configurations
        const planConfigs = {
            'monthly': {
                name: 'Monthly Graphics Plan',
                description: 'Monthly subscription for premium templates',
                planId: 'plan_monthly_id' // Replace with actual plan ID from Razorpay dashboard
            },
            'quarterly': {
                name: 'Quarterly Graphics Plan', 
                description: 'Quarterly subscription for premium templates',
                planId: 'plan_quarterly_id' // Replace with actual plan ID from Razorpay dashboard
            },
            'annual': {
                name: 'Annual Graphics Plan',
                description: 'Annual subscription for premium templates', 
                planId: 'plan_annual_id' // Replace with actual plan ID from Razorpay dashboard
            }
        };

        // Handle subscription payment
        async function handleSubscription(planType, amount, planId) {
            try {
                // Show loading state
                const button = event.target;
                button.classList.add('loading');
                button.innerHTML = 'Processing...';
                
                // Hide previous messages
                hideMessages();
                
                // Create subscription (you'll need a backend endpoint for this)
                const subscriptionId = await createSubscription(planId, amount);
                
                // Configure Razorpay options
                const options = {
                    key: RAZORPAY_KEY_ID,
                    subscription_id: subscriptionId,
                    name: COMPANY_NAME,
                    description: planConfigs[planType].description,
                    image: COMPANY_LOGO,
                    handler: function (response) {
                        handlePaymentSuccess(response, planType, amount);
                    },
                    prefill: {
                        name: '',
                        email: '',
                        contact: ''
                    },
                    notes: {
                        plan_type: planType,
                        amount: amount
                    },
                    theme: {
                        color: '#667eea'
                    },
                    modal: {
                        ondismiss: function() {
                            // Reset button state
                            button.classList.remove('loading');
                            button.innerHTML = `Subscribe Now - ‚Çπ${amount}`;
                        }
                    }
                };

                // Open Razorpay checkout
                const rzp = new Razorpay(options);
                rzp.on('payment.failed', function (response) {
                    handlePaymentFailure(response);
                    // Reset button state
                    button.classList.remove('loading');
                    button.innerHTML = `Subscribe Now - ‚Çπ${amount}`;
                });
                
                rzp.open();

            } catch (error) {
                console.error('Subscription error:', error);
                showError('Failed to initiate subscription. Please try again.');
                
                // Reset button state
                const button = event.target;
                button.classList.remove('loading');
                button.innerHTML = `Subscribe Now - ‚Çπ${amount}`;
            }
        }

        // Create subscription (requires backend API)
        async function createSubscription(planId, amount) {
            try {
                // This needs to be replaced with actual backend call
                // For now, returning a dummy subscription ID
                
                // Example backend call:
                /*
                const response = await fetch('/api/create-subscription', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        plan_id: planId,
                        amount: amount
                    })
                });
                
                const data = await response.json();
                return data.subscription_id;
                */
                
                // For demo purposes - replace with actual subscription ID
                return 'sub_' + Math.random().toString(36).substr(2, 9);
                
            } catch (error) {
                console.error('Error creating subscription:', error);
                throw new Error('Failed to create subscription');
            }
        }

        // Handle successful payment
        function handlePaymentSuccess(response, planType, amount) {
            console.log('Payment successful:', response);
            
            // Show success message
            showSuccess();
            
            // Log payment details
            console.log('Payment ID:', response.razorpay_payment_id);
            console.log('Subscription ID:', response.razorpay_subscription_id);
            console.log('Signature:', response.razorpay_signature);
            
            // Send payment confirmation to backend (optional)
            sendPaymentConfirmation(response, planType, amount);
            
            // Redirect to success page after 3 seconds
            setTimeout(() => {
                // You can redirect to a success page or dashboard
                // window.location.href = '/dashboard';
                
                // Or show access instructions
                showAccessInstructions(planType);
            }, 3000);
        }

        // Handle payment failure
        function handlePaymentFailure(response) {
            console.error('Payment failed:', response.error);
            
            const errorMessage = response.error.description || 'Payment failed. Please try again.';
            showError(errorMessage);
            
            // Log error details
            console.log('Error code:', response.error.code);
            console.log('Error description:', response.error.description);
            console.log('Error reason:', response.error.reason);
        }

        // Send payment confirmation to backend
        async function sendPaymentConfirmation(response, planType, amount) {
            try {
                // This is optional - you can send confirmation to your backend
                /*
                await fetch('/api/payment-confirmation', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        payment_id: response.razorpay_payment_id,
                        subscription_id: response.razorpay_subscription_id,
                        signature: response.razorpay_signature,
                        plan_type: planType,
                        amount: amount
                    })
                });
                */
                
                console.log('Payment confirmation sent to backend');
            } catch (error) {
                console.error('Error sending payment confirmation:', error);
            }
        }

        // Show success message
        function showSuccess() {
            const successMsg = document.getElementById('successMessage');
            successMsg.style.display = 'block';
            successMsg.scrollIntoView({ behavior: 'smooth' });
        }

        // Show error message
        function showError(message) {
            const errorMsg = document.getElementById('errorMessage');
            const errorText = document.getElementById('errorText');
            errorText.textContent = message;
            errorMsg.style.display = 'block';
            errorMsg.scrollIntoView({ behavior: 'smooth' });
        }

        // Hide all messages
        function hideMessages() {
            document.getElementById('successMessage').style.display = 'none';
            document.getElementById('errorMessage').style.display = 'none';
        }

        // Show access instructions
        function showAccessInstructions(planType) {
            const instructions = {
                'monthly': '‡§Ü‡§™ ‡§Ö‡§¨ 1000+ premium templates access ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç!',
                'quarterly': '‡§Ü‡§™ ‡§Ö‡§¨ 3000+ premium templates ‡§î‡§∞ priority support access ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç!',
                'annual': '‡§Ü‡§™ ‡§Ö‡§¨ 5000+ premium templates ‡§î‡§∞ ‡§∏‡§≠‡•Ä premium features access ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç!'
            };
            
            alert(`üéâ Subscription Active!\n\n${instructions[planType]}\n\n‡§Ü‡§™‡§ï‡•ã email confirmation ‡§≠‡•Ä ‡§Æ‡§ø‡§≤ ‡§ú‡§æ‡§è‡§ó‡•Ä‡•§`);
        }

        // Utility functions
        function formatCurrency(amount) {
            return new Intl.NumberFormat('en-IN', {
                style: 'currency',
                currency: 'INR'
            }).format(amount);
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            console.log('PixelPerfect Graphix Subscription Page Loaded');
            console.log('Razorpay Key:', RAZORPAY_KEY_ID);
            
            // Check if Razorpay is loaded
            if (typeof Razorpay === 'undefined') {
                console.error('Razorpay SDK not loaded');
                showError('Payment system not available. Please refresh the page.');
            }
        });

        // Handle page visibility for better UX
        document.addEventListener('visibilitychange', function() {
            if (document.visibilityState === 'visible') {
                // Page is visible again - you can refresh status if needed
                console.log('Page is visible');
            }
        });
    </script>
</body>
</html>
